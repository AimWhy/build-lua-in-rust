# 控制结构

本章介绍控制结构，最明显的变化是自此虚拟机不再只有顺序执行，而出现了跳转。并且由于语法分析时递归调用语法块block的解析，需要处理局部变量作用域，使得block的含义和界限更加清晰。

Lua语言中的几种控制结构跟其他语言中的语义类型，没什么特别之处。下面首先介绍最简单的if语句的if分支，引入条件跳转和block的处理。接下来就按照各自语义依次介绍其他控制结构，大部分都是通过条件跳转（Test字节码）和无条件跳转（Jump字节码）来实现。只有数值型for语句，虽然也可以，但因为有更复杂的语义，所以使用2个新字节码。泛型for语句需要用到函数，所以在后续章节介绍。其中在介绍repeat..until语句时，还讨论并尝试引入了continue语句，并保证向后兼容。

另外，需要说明的是，虽然本章完整地实现了各个控制结构，但在下一章介绍了关系运算和逻辑运算后，需要XXX